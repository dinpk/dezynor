<!doctype html>
<html>
	<head>
		<title>Import Dezyns</title>
		<style>
			body {
				text-align:center;
				padding-bottom:50px;
			}
			textarea {
				width:90%;
				max-width:1000px;
				height:500px;
				min-height:80vh;
				display:block;
				margin:20px auto;
				border:5px solid dodgerblue;
			}
			b {
				font-style:italic;
				color:red;
				font-family:Arial;
			}
			#import_message {
				font-weight:bold;
			}
		</style>
		<script>
			function importData() {
				let dezyns_added = 0;
				let data = JSON.parse(document.getElementById("imported_data").value);
				localStorage.setItem("dezynor_folders", data.folders);
				localStorage.setItem("dezynor_fonts", data.fonts);
				let dezyns = data.dezyns;
				for (let i = 0; i < dezyns.length; i++) {
					let dezyn = dezyns[i];
					let dezyn_key = dezyn.key + "|" + dezyn.folder;
					let dezyn_data = dezyn.data;
					console.log(dezyn_key, dezyn_data);
					dezyn_data = dezyn_data.replaceAll("url(\"", "url(");
					dezyn_data = dezyn_data.replaceAll("\");", ");");
					dezyn_data = dezyn_data.replaceAll("url(\"\")", "url()");
					localStorage.setItem(dezyn_key, dezyn_data);
					dezyns_added++;
				}
				document.getElementById("import_message").innerHTML = "<span style='color:green'>" + dezyns_added + " dezyns imported.</span> <a href='index.html'>Visit dezyns</a>";
			}
		</script>
	</head>
	<body">
		<textarea id="imported_data"></textarea>
		<input type="button" value="Import" onclick="importData();"> 
		<p id="import_message"></p>
	</body>
</html>

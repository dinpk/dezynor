<!doctype html>
<html>
	<head>
		<title>Import Designs</title>
		<style>
			body {
				text-align:center;
				padding-bottom:50px;
			}
			textarea {
				width:90%;
				max-width:1000px;
				height:500px;
				min-height:80vh;
				display:block;
				margin:20px auto;
				border:5px solid dodgerblue;
			}
			b {
				font-style:italic;
				color:red;
				font-family:Arial;
			}
			#import_message {
				font-weight:bold;
			}
		</style>
		<script>
			function importData() {
				let designs_added = 0;
				let data = JSON.parse(document.getElementById("imported_data").value);
				localStorage.setItem("dezynor_folders", data.folders);
				localStorage.setItem("dezynor_fonts", data.fonts);
				let designs = data.designs;
				for (let i = 0; i < designs.length; i++) {
					let design = designs[i];
					let design_key = design.key + "|" + design.folder;
					let design_data = design.data;
					console.log(design_key, design_data);
					design_data = design_data.replaceAll("url(\"", "url(");
					design_data = design_data.replaceAll("\");", ");");
					design_data = design_data.replaceAll("url(\"\")", "url()");
					localStorage.setItem(design_key, design_data);
					designs_added++;
				}
				document.getElementById("import_message").innerHTML = "<span style='color:green'>" + designs_added + " designs imported.</span> <a href='index.html'>Visit designs</a>";
			}
		</script>
	</head>
	<body">
		<textarea id="imported_data"></textarea>
		<input type="button" value="Import" onclick="importData();"> 
		<p id="import_message"></p>
	</body>
</html>
